#### **Работа фильтра `operation_rank=1` с различными операциями внутри платежа**  
1. [ ] Отображение только последней операции платежа при включенном `operation_rank=1`.  
   - Пример: Успешный платеж отображается только с операцией "Снятие - Успешный".  
2. [ ] Отображение последней операции платежа, если она является операцией возврата.  
   - Пример: Успешный платеж с возвратом отображается только с операцией "Возвращен - Успешный".  
3. [ ] Отображение всех операций, включая частичные возвраты, при отключенном `operation_rank=1`.  
   - Пример: Все операции платежа видны в реестре (создано, в обработке, успешный, возврат).  

#### **Фильтр `operation_rank=1` для частичных возвратов**  
1. [ ] Отображение всех операций частичного возврата внутри платежа при включенном фильтре.  
   - Пример: У платежа с двумя частичными возвратами отображаются обе операции возврата.  
2. [ ] Исключение операций снятия или других статусов при наличии частичных возвратов в реестре.  
   - Пример: У платежа с операциями "Снятие - Успешный" и "Возвращен - Частичный" видны только возвраты.  

#### **Работа фильтра с временными диапазонами**  
1. [ ] Отображение частичных возвратов за указанный день.  
2. [ ] Отображение частичных возвратов за указанный месяц.  
3. [ ] Отображение частичных возвратов за произвольный диапазон дат.  
4. Отсутствие данных в реестре, если за выбранный период операций частичного возврата не было.  

#### **Граничные сценарии**  
1. [ ] Отображение последней операции для платежа, состоящего только из одной операции.  
2. [ ] Корректная работа фильтра при отсутствии операций возврата или частичного возврата у платежей.  
3. [ ] Корректное отображение операций в платежах с максимальным количеством операций (например, 10+ операций внутри).  

#### **Валидация работы фильтра с разными типами операций**  
1. [ ] Корректное отображение операций "Снятие - Успешный" при отсутствии возвратов.  
2. [ ] Отображение всех операций возврата (успешных и частичных) внутри платежа.  
3. [ ] Исключение операций "Контроль" или "Создано" из реестра при включенном `operation_rank=1`.  

#### **UI и взаимодействие с фильтром**  
1. [ ] Корректное отображение данных в интерфейсе реестра при включении и отключении фильтра.  
2. [ ] Динамическое обновление данных реестра при переключении фильтра.  
3. [ ] Сохранение корректного отображения структуры данных реестра (колонки, строки, значения).  
